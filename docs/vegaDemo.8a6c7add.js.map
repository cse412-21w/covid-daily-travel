{"version":3,"sources":["vegaDemo.js"],"names":["options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","stroke","vl","register","vega","vegaLite","d3","csv","travel_data","then","drawBarVegaLite","click","selectMulti","encodings","brush","selectInterval","brusha","domain","range","trip_2020","markBar","opacity","select","data","transform","filter","encode","y","fieldN","axis","labelAngle","titleColor","labelColor","tickColor","domainColor","labelFont","labelFontSize","titleFontSize","titleFont","sort","title","x","average","grid","color","if","value","text","fontSize","font","width","trip_Point","markCircle","filled","size","fieldT","trip_Line","markLine","legend","fillColor","height","vconcat","layer","background","autosize","type","contains","resolve","scale","render","viewElement","document","getElementById","appendChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAAiE;AACjE,cAAkB;AACA;;AAElB;AACA;AACA;;;AACA,IAAMA,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,CACN;AADM,GADM;AAKdC,EAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACd;AACAA,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIC,WAAW,CAACC,OAAhB,GAA0BC,IAAvC;AACD,GARa;AASdJ,EAAAA,IAAI,EAAE;AACJ;AACA;AACA;AACA;AACA;AACAK,IAAAA,QAAQ,EAAE,KANN;AAOJC,IAAAA,MAAM,EAAE;AAPJ;AATQ,CAAhB;AAoBAC,EAAE,CAACC,QAAH,CAAYC,IAAZ,EAAkBC,QAAlB,EAA4Bb,OAA5B,GAEA;;AACAc,EAAE,CAACC,GAAH,CAAOC,0BAAP,EAAoBC,IAApB,CAAyBC,eAAzB;AAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,eAAT,GAA2B;AACzB;AACA;AAEE,MAAMC,KAAK,GAAGT,EAAE,CAACU,WAAH,GAAiBC,SAAjB,CAA2B,OAA3B,CAAd;AACA,MAAMC,KAAK,GAAGZ,EAAE,CAACa,cAAH,GAAoBF,SAApB,CAA8B,GAA9B,CAAd;AAEA,MAAMG,MAAM,GAAG;AACXC,IAAAA,MAAM,EAAE,CAAC,gBAAD,EAAmB,eAAnB,EAAoC,eAApC,EAAqD,iBAArD,CADG;AAEXC,IAAAA,KAAK,EAAE,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC;AAFI,GAAf;AAKA,MAAMC,SAAS,GAAGjB,EAAE,CAACkB,OAAH,CAAW;AAACC,IAAAA,OAAO,EAAE;AAAV,GAAX,EACEC,MADF,CACSX,KADT,EAEEY,IAFF,CAEOf,0BAFP,EAGEgB,SAHF,CAGYtB,EAAE,CAACuB,MAAH,CAAUX,KAAV,CAHZ,EAIEY,MAJF,CAKGxB,EAAE,CAACyB,CAAH,GAAOC,MAAP,CAAc,MAAd,EAAsBC,IAAtB,CAA2B;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBC,IAAAA,UAAU,EAAE,SAA7B;AAAwCC,IAAAA,UAAU,EAAE,SAApD;AAA+DC,IAAAA,SAAS,EAAE,SAA1E;AAAoFC,IAAAA,WAAW,EAAE,SAAjG;AAA4GC,IAAAA,SAAS,EAAE,QAAvH;AAAiIC,IAAAA,aAAa,EAAE,EAAhJ;AAAoJC,IAAAA,aAAa,EAAE,EAAnK;AAAuKC,IAAAA,SAAS,EAAC;AAAjL,GAA3B,EAAwNC,IAAxN,CAA6N,IAA7N,EAAmOC,KAAnO,CAAyO,eAAzO,CALH,EAMGtC,EAAE,CAACuC,CAAH,GAAOC,OAAP,CAAe,OAAf,EAAwBF,KAAxB,CAA8B,qBAA9B,EAAqDX,IAArD,CAA0D;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBa,IAAAA,IAAI,EAAE,KAAvB;AAA8BZ,IAAAA,UAAU,EAAE,SAA1C;AAAqDC,IAAAA,UAAU,EAAE,SAAjE;AAA4EC,IAAAA,SAAS,EAAE,SAAvF;AAAiGC,IAAAA,WAAW,EAAE,SAA9G;AAAyHC,IAAAA,SAAS,EAAE,QAApI;AAA8IC,IAAAA,aAAa,EAAE,EAA7J;AAAiKC,IAAAA,aAAa,EAAE,EAAhL;AAAoLC,IAAAA,SAAS,EAAC;AAA9L,GAA1D,CANH,EAOGpC,EAAE,CAAC0C,KAAH,GAAWC,EAAX,CAAclC,KAAd,EAAqBT,EAAE,CAAC0C,KAAH,GAAWhB,MAAX,CAAkB,MAAlB,EAA0BY,KAA1B,CAAgC,gBAAhC,CAArB,CAPH,EAQGtC,EAAE,CAACmB,OAAH,GAAawB,EAAb,CAAgBlC,KAAhB,EAAuBT,EAAE,CAAC4C,KAAH,CAAS,CAAT,CAAvB,EAAoCA,KAApC,CAA0C,GAA1C,CARH,EAUEN,KAVF,CAUQ;AAACO,IAAAA,IAAI,EAAC,wDAAN;AAA+DH,IAAAA,KAAK,EAAE,SAAtE;AAAgFI,IAAAA,QAAQ,EAAE,EAA1F;AAA8FC,IAAAA,IAAI,EAAE;AAApG,GAVR,EAWEC,KAXF,CAWQ,GAXR,CAAlB;AAaA,MAAMC,UAAU,GAAEjD,EAAE,CAACkD,UAAH,CAAc;AAACC,IAAAA,MAAM,EAAE,IAAT;AAAeC,IAAAA,IAAI,EAAE;AAArB,GAAd,EACF/B,IADE,CACGf,0BADH,EAEFkB,MAFE,CAGDxB,EAAE,CAACuC,CAAH,GAAOc,MAAP,CAAc,MAAd,EAAsB1B,IAAtB,CAA2B;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBa,IAAAA,IAAI,EAAE,KAAvB;AAA8BZ,IAAAA,UAAU,EAAE,SAA1C;AAAqDC,IAAAA,UAAU,EAAE,SAAjE;AAA4EE,IAAAA,WAAW,EAAE,SAAzF;AAAoGC,IAAAA,SAAS,EAAE,QAA/G;AAAyHC,IAAAA,aAAa,EAAE;AAAxI,GAA3B,CAHC,EAIDlC,EAAE,CAACyB,CAAH,GAAOe,OAAP,CAAe,OAAf,EAAwBF,KAAxB,CAA8B;AAACO,IAAAA,IAAI,EAAE;AAAP,GAA9B,EAA6DlB,IAA7D,CAAkE;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBa,IAAAA,IAAI,EAAE,KAAvB;AAA8BZ,IAAAA,UAAU,EAAE,SAA1C;AAAqDC,IAAAA,UAAU,EAAE,SAAjE;AAA4EC,IAAAA,SAAS,EAAE,SAAvF;AAAkGC,IAAAA,WAAW,EAAE,SAA/G;AAAyHC,IAAAA,SAAS,EAAE,QAApI;AAA8IC,IAAAA,aAAa,EAAE;AAA7J,GAAlE,CAJC,EAKDlC,EAAE,CAAC0C,KAAH,GAAWE,KAAX,CAAiB,OAAjB,EACUD,EADV,CACa/B,KADb,EACoBZ,EAAE,CAAC0C,KAAH,GAAWhB,MAAX,CAAkB,MAAlB,CADpB,CALC,EAOD1B,EAAE,CAACmB,OAAH,GAAawB,EAAb,CAAgBlC,KAAhB,EAAuBT,EAAE,CAAC4C,KAAH,CAAS,CAAT,CAAvB,EAAoCA,KAApC,CAA0C,GAA1C,CAPC,EASFN,KATE,CASI;AAACO,IAAAA,IAAI,EAAE,8BAAP;AAAuCH,IAAAA,KAAK,EAAE,SAA9C;AAAwDI,IAAAA,QAAQ,EAAE,EAAlE;AAAsEC,IAAAA,IAAI,EAAE;AAA5E,GATJ,EAUF3B,MAVE,CAUKR,KAVL,EAWFU,SAXE,CAWQtB,EAAE,CAACuB,MAAH,CAAUd,KAAV,CAXR,EAYFuC,KAZE,CAYI,GAZJ,CAAlB;AAcA,MAAMM,SAAS,GAAEtD,EAAE,CAACuD,QAAH,GACDlC,IADC,CACIf,0BADJ,EAEDkB,MAFC,CAGAxB,EAAE,CAACuC,CAAH,GAAOc,MAAP,CAAc,MAAd,EAAsB1B,IAAtB,CAA2B;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBa,IAAAA,IAAI,EAAE,KAAvB;AAA8BZ,IAAAA,UAAU,EAAE,SAA1C;AAAqDC,IAAAA,UAAU,EAAE,SAAjE;AAA4EC,IAAAA,SAAS,EAAE,SAAvF;AAAkGC,IAAAA,WAAW,EAAE,SAA/G;AAAyHG,IAAAA,aAAa,EAAE,EAAxI;AAA4IC,IAAAA,SAAS,EAAC;AAAtJ,GAA3B,CAHA,EAIApC,EAAE,CAACyB,CAAH,GAAOe,OAAP,CAAe,OAAf,EAAwBF,KAAxB,CAA8B;AAACO,IAAAA,IAAI,EAAE;AAAP,GAA9B,EAA6DlB,IAA7D,CAAkE;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBa,IAAAA,IAAI,EAAE,KAAvB;AAA8BZ,IAAAA,UAAU,EAAE,SAA1C;AAAqDC,IAAAA,UAAU,EAAE,SAAjE;AAA4EE,IAAAA,WAAW,EAAE,SAAzF;AAAoGG,IAAAA,aAAa,EAAE,EAAnH;AAAuHC,IAAAA,SAAS,EAAC;AAAjI,GAAlE,CAJA,EAKApC,EAAE,CAAC0C,KAAH,GAAWhB,MAAX,CAAkB,MAAlB,EAA0B8B,MAA1B,CAAiC;AAACC,IAAAA,SAAS,EAAC,OAAX;AAAoB5B,IAAAA,UAAU,EAAE,SAAhC;AAA2CC,IAAAA,UAAU,EAAE,SAAvD;AAAiEG,IAAAA,SAAS,EAAE,QAA5E;AAAsFC,IAAAA,aAAa,EAAE,EAArG;AAAyGE,IAAAA,SAAS,EAAE,QAApH;AAA8HD,IAAAA,aAAa,EAAE;AAA7I,GAAjC,CALA,EAMAnC,EAAE,CAACmB,OAAH,GAAawB,EAAb,CAAgBlC,KAAhB,EAAuBT,EAAE,CAAC4C,KAAH,CAAS,GAAT,CAAvB,EAAsCA,KAAtC,CAA4C,GAA5C,CANA,EAOAc,MAPA,CAOO,GAPP,CAAjB;AASA,SAAO1D,EAAE,CAAC2D,OAAH,CAAY3D,EAAE,CAAC4D,KAAH,CAASN,SAAT,EAAoBL,UAApB,CAAZ,EAA6ChC,SAA7C,EACM4C,UADN,CACiB;AAACnB,IAAAA,KAAK,EAAE;AAAR,GADjB,EAEMoB,QAFN,CAEe;AAACC,IAAAA,IAAI,EAAE,OAAP;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFf,EAGMC,OAHN,CAGc;AAACC,IAAAA,KAAK,EAAE;AAACzC,MAAAA,CAAC,EAAE;AAAJ;AAAR,GAHd,EAIM0C,MAJN,GAKM5D,IALN,CAKW,UAAA6D,WAAW,EAAI;AACnB;AACA;AACAC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,WAAhC,CAA4CH,WAA5C;AACf,GATQ,CAAP;AAUH","file":"vegaDemo.8a6c7add.js","sourceRoot":"../src","sourcesContent":["import travel_data from '../static/trips_categorize_24@3.csv'    // import dataset\n\"use strict\";     // the code should be executed in \"strict mode\".\n                  // With strict mode, you can not, for example, use undeclared variables\n\n/*var sunshineArray = [];   // used to store data later\nvar citySet = [];\n*/\nconst options = {\n  config: {\n    // Vega-Lite default configuration\n\n  },\n  init: (view) => {\n    // initialize tooltip handler\n    view.tooltip(new vegaTooltip.Handler().call);\n  },\n  view: {\n    // view constructor options\n    // remove the loader if you don't want to default to vega-datasets!\n    //   loader: vega.loader({\n    //     baseURL: \"\",\n    //   }),\n    renderer: \"svg\",\n    stroke: \"transparent\"\n  },\n};\n\nvl.register(vega, vegaLite, options);\n\n// Again, We use d3.csv() to process data\nd3.csv(travel_data).then(drawBarVegaLite); /*{\n  data.forEach(function(d){\n    sunshineArray.push(d);\n    if (!citySet.includes(d.city)) {\n      citySet.push(d.city);\n    }\n  })\n  drawBarVegaLite();\n})*/\n\nfunction drawBarVegaLite() {\n  // var sunshine = add_data(vl, sunshine.csv, format_type = NULL);\n  // your visualization goes here\n  \n    const click = vl.selectMulti().encodings('color');\n    const brush = vl.selectInterval().encodings('x');\n      \n    const brusha = {\n        domain: ['Walkable Trips', 'Commute Trips', 'Outdoor Trips', 'Traveling Trips'],\n        range: ['#e7ba52', '#a7a7a7', '#aec7e8', '#ff9af3']\n      };\n    \n    const trip_2020 = vl.markBar({opacity: 0.8})\n                       .select(click)\n                       .data(travel_data)\n                       .transform(vl.filter(brush))\n                       .encode(\n                         vl.y().fieldN('dist').axis({ labelAngle: 0, titleColor: '#d1f7ff', labelColor: '#d1f7ff', tickColor: '#d1f7ff',domainColor: '#d1f7ff', labelFont: 'Tahoma', labelFontSize: 11, titleFontSize: 12, titleFont:'Tahoma' }).sort(null).title('trip distance'),\n                         vl.x().average('value').title('The Number of Trips').axis({ labelAngle: 0, grid: false, titleColor: '#d1f7ff', labelColor: '#d1f7ff', tickColor: '#d1f7ff',domainColor: '#d1f7ff', labelFont: 'Tahoma', labelFontSize: 11, titleFontSize: 12, titleFont:'Tahoma'}),\n                         vl.color().if(click, vl.color().fieldN('dist').title('Distance Range')),\n                         vl.opacity().if(click, vl.value(1)).value(0.2)\n                       )\n                       .title({text:'Distribution of the Avg.Trips in United States in 2020',color: '#d1f7ff',fontSize: 15, font: 'Tahoma'})\n                       .width(950)\n    \n    const trip_Point =vl.markCircle({filled: true, size: 6})\n                   .data(travel_data)\n                   .encode(\n                     vl.x().fieldT('Date').axis({ labelAngle: 0, grid: false, titleColor: '#d1f7ff', labelColor: '#d1f7ff', domainColor: '#d1f7ff', labelFont: 'Tahoma', labelFontSize: 11}),\n                     vl.y().average('value').title({text: 'The Number of Trips'}).axis({ labelAngle: 0, grid: false, titleColor: '#d1f7ff', labelColor: '#d1f7ff', tickColor: '#d1f7ff', domainColor: '#d1f7ff',labelFont: 'Tahoma', labelFontSize: 11}),\n                     vl.color().value('black')\n                              .if(brush, vl.color().fieldN('dist')),\n                     vl.opacity().if(click, vl.value(1)).value(0.2)\n                   )\n                   .title({text: 'Trips Distance in Each Month', color: '#d1f7ff',fontSize: 15, font: 'Tahoma'})\n                   .select(brush)\n                   .transform(vl.filter(click))\n                   .width(950)\n    \n    const trip_Line =vl.markLine()\n                   .data(travel_data)\n                   .encode(\n                     vl.x().fieldT('Date').axis({ labelAngle: 0, grid: false, titleColor: '#d1f7ff', labelColor: '#d1f7ff', tickColor: '#d1f7ff', domainColor: '#d1f7ff',titleFontSize: 12, titleFont:'Tahoma' }),\n                     vl.y().average('value').title({text: 'The Number of Trips'}).axis({ labelAngle: 0, grid: false, titleColor: '#d1f7ff', labelColor: '#d1f7ff', domainColor: '#d1f7ff', titleFontSize: 12, titleFont:'Tahoma'}),\n                     vl.color().fieldN('dist').legend({fillColor:'black', titleColor: '#d1f7ff', labelColor: '#d1f7ff',labelFont: 'Tahoma', labelFontSize: 11, titleFont: 'Tahoma', titleFontSize: 12}),\n                     vl.opacity().if(click, vl.value(0.5)).value(0.2))\n                    .height(300)\n    \n    return vl.vconcat( vl.layer(trip_Line, trip_Point), trip_2020)\n                .background({color: 'black'})\n                .autosize({type: 'fit-x', contains: 'padding'})\n                .resolve({scale: {y: 'shared'}})\n                .render()\n                .then(viewElement => {\n                  // render returns a promise to a DOM element containing the chart\n                  // viewElement.value contains the Vega View object instance\n                  document.getElementById('view').appendChild(viewElement);\n  });\n}\n  \n"]}